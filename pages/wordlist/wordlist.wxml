<view class="container">
  <navigation-bar title="词库管理" back="true" color="black" background="#ffffff"></navigation-bar>
  
  <!-- 词库管理页面内容 -->
  <view class="wordlist-page-content">
    <!-- 顶部操作栏 -->
    <view class="toolbar">
      <button class="add-btn" type="primary" bindtap="showAddWordListModal">
        + 新增词库
      </button>
      <button class="merge-btn" bindtap="showMergeWordListModal">
        ⚙️ 合并词库
      </button>
    </view>
    
    <!-- 词库列表 -->
    <scroll-view class="wordlist-scroll" scroll-y="true">
      <view class="wordlist-section" wx:if="{{wordLists.length > 0}}">
        <view class="section-title">我的词库</view>
        
        <view class="wordlist-items">
          <view 
            class="wordlist-item" 
            wx:for="{{wordLists}}" 
            wx:key="id"
          >
            <view class="item-content" bindtap="viewWordListDetail" data-id="{{item.id}}" data-index="{{index}}">
              <view class="item-icon">📚</view>
              <view class="item-info">
                <view class="item-title">{{item.name}}</view>
                <view class="item-stats">{{item.words.length}} 个单词</view>
              </view>
              <view class="item-arrow">›</view>
            </view>
            
            <view class="item-actions">
              <button class="action-btn rename" bindtap="showRenameWordListModal" data-id="{{item.id}}" data-index="{{index}}">重命名</button>
              <button class="action-btn delete" type="warn" bindtap="showDeleteWordListModal" data-id="{{item.id}}" data-index="{{index}}">删除</button>
            </view>
          </view>
        </view>
      </view>
      
      <!-- 空状态 -->
      <view class="empty-state" wx:else>
        <view class="empty-icon">📚</view>
        <view class="empty-title">暂无词库</view>
        <view class="empty-desc">点击「新增词库」开始创建您的第一个词库</view>
      </view>
    </scroll-view>
  </view>
  
  <!-- 新增词库弹窗 -->
  <view class="modal" wx:if="{{showAddModal}}">
    <view class="modal-content">
      <view class="modal-title">新增词库</view>
      <input 
        class="modal-input" 
        placeholder="请输入词库名称" 
        value="{{newWordListName}}" 
        bindinput="onNewWordListNameInput"
      />
      <view class="modal-actions">
        <button bindtap="cancelAddWordList">取消</button>
        <button type="primary" bindtap="confirmAddWordList">确认</button>
      </view>
    </view>
  </view>
  
  <!-- 重命名词库弹窗 -->
  <view class="modal" wx:if="{{showRenameModal}}">
    <view class="modal-content">
      <view class="modal-title">重命名词库</view>
      <input 
        class="modal-input" 
        placeholder="请输入新词库名称" 
        value="{{renameWordListName}}" 
        bindinput="onRenameWordListNameInput"
      />
      <view class="modal-actions">
        <button bindtap="cancelRenameWordList">取消</button>
        <button type="primary" bindtap="confirmRenameWordList">确认</button>
      </view>
    </view>
  </view>
  
  <!-- 删除词库确认弹窗 -->
  <view class="modal" wx:if="{{showDeleteModal}}">
    <view class="modal-content">
      <view class="modal-title">删除词库</view>
      <view class="modal-message">确定要删除词库「{{selectedWordListName}}」吗？此操作不可恢复。</view>
      <view class="modal-actions">
        <button bindtap="cancelDeleteWordList">取消</button>
        <button type="warn" bindtap="confirmDeleteWordList">删除</button>
      </view>
    </view>
  </view>
  
  <!-- 合并词库弹窗 -->
  <view class="modal" wx:if="{{showMergeModal}}">
    <view class="modal-content">
      <view class="modal-title">合并词库</view>
      <view class="merge-options">
        <view class="merge-source">
          <view class="merge-label">源词库：</view>
          <picker bindchange="onSourceWordListChange" value="{{sourceWordListIndex}}" range="{{wordListNames}}">
            <view class="picker">
              {{selectedSourceWordList || '请选择源词库'}}
            </view>
          </picker>
        </view>
        <view class="merge-target">
          <view class="merge-label">目标词库：</view>
          <picker bindchange="onTargetWordListChange" value="{{targetWordListIndex}}" range="{{wordListNames}}">
            <view class="picker">
              {{selectedTargetWordList || '请选择目标词库'}}
            </view>
          </picker>
        </view>
      </view>
      <view class="modal-actions">
        <button bindtap="cancelMergeWordList">取消</button>
        <button type="primary" bindtap="confirmMergeWordList">合并</button>
      </view>
    </view>
  </view>
</view>